<!DOCTYPE html>
<html>
<head>
  <title>Profile</title>
  <style>
.profile-card {
  max-width: 500px;
  margin: auto;
  padding: 1rem;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.dark-mode .profile-card {
  background-color: #222;
  color: #fff;
}

.profile-picture {
  /* Styles for profile picture */
}

.profile-details {
  /* Styles for profile details */
}

.social-links {
  /* Styles for social links */
}

.website-link {
  /* Styles for website link */
}

.other-links {
  /* Styles for other links */
}

.admin-icon {
  /* Styles for admin icon */
}

.roles {
  /* Styles for roles */
}

.member-site {
  /* Styles for member site */
}

.registered-sites {
  /* Styles for registered sites */
}

.yank-account {
  /* Styles for yank account */
}

  </style>
</head>
<body>
  <header>
    <!-- Add header content -->
  </header>

  <main>
    <section id="profile-card">
      <!-- Profile card content will be dynamically generated -->
    </section>
  </main>

  <footer>
    <!-- Add footer content -->
  </footer>
</body>
</html>


<script>document.addEventListener("DOMContentLoaded", function () {
    var profileCard = document.getElementById("profile-card");
  
    // Fetch the user's profile data from the JSON database
    fetch("https://accounts.yeahgames.net/data/settings/profile.json")
      .then(function (response) {
        if (response.ok) {
          return response.json();
        } else {
          throw new Error("Failed to retrieve profile data.");
        }
      })
      .then(function (profileData) {
        // Retrieve the user's profile based on the permalink (username)
        var permalink = window.location.pathname.replace("/", "");
        var userProfile = profileData.find(function (profile) {
          return profile.username === permalink;
        });
  
        if (userProfile) {
          // Fetch the user's account data from the JSON database
          fetch("https://accounts.yeahgames.net/data/accounts.json")
            .then(function (response) {
              if (response.ok) {
                return response.json();
              } else {
                throw new Error("Failed to retrieve account data.");
              }
            })
            .then(function (accountData) {
              // Find the user's account based on the username
              var userAccount = accountData.find(function (account) {
                return account.username === userProfile.username;
              });
  
              if (userAccount && userAccount.admin) {
                userProfile.isAdmin = true;
              }
  
              // Generate the profile card HTML based on the user's data
              var profileHTML = `
                <div class="profile-card">
                  <div class="profile-picture">
                    <img src="${userProfile.profilePicture}" alt="Profile Picture">
                  </div>
                  <div class="profile-details">
                    <h2>${userProfile.name}</h2>
                    <p>${userProfile.username}</p>
                    <p>${userProfile.email}</p>
                    ${userProfile.isAdmin ? '<span class="admin-icon">Admin</span>' : ''}
                    <p class="roles">${userProfile.roles.join(", ")}</p>
                    <p class="member-site">${userProfile.username}.ms.yeahgames.net</p>
                    <p class="registered-sites">${userProfile.registeredSites.join(", ")}</p>
                    <p class="yank-account">Yank Account: ${userProfile.yankAccount}</p>
                  </div>
                  <div class="social-links">
                    <!-- Add social links dynamically -->
                  </div>
                  <div class="website-link">
                    <a href="${userProfile.website}" target="_blank">${userProfile.website}</a>
                  </div>
                  <div class="other-links">
                    <!-- Add other links dynamically -->
                  </div>
                </div>
              `;
  
              profileCard.innerHTML = profileHTML;
            })
            .catch(function (error) {
              console.error("Error:", error);
              // Display an error message or handle the error gracefully
            });
        } else {
          throw new Error("Profile not found.");
        }
      })
      .catch(function (error) {
        console.error("Error:", error);
        // Display an error message or handle the error gracefully
      });
  });  
  </script>